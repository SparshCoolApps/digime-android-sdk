apply plugin: 'com.android.library'

android {
    compileSdkVersion rootProject.compileSdkVersion
    buildToolsVersion rootProject.buildToolsVersion

    defaultConfig {
        versionCode 1
        versionName version
        minSdkVersion rootProject.minSdkVersion.digime
        consumerProguardFiles 'proguard-rules.pro'
    }

    defaultPublishConfig 'debug'
    publishNonDefault true

    buildTypes {
        debug {
            buildConfigField "String", "BASE_HOST", "\"api.unencrypted.devdigi.me\""
            testCoverageEnabled coverageEnabled
        }

        release {
            buildConfigField "String", "BASE_HOST", "\"api.stagingdigi.me\""
            //buildConfigField "String", "BASE_HOST", "\"api.unencrypted.devdigi.me\""
        }
    }

    lintOptions {
        warningsAsErrors true
    }

    compileOptions {
        sourceCompatibility rootProject.sourceCompatibilityVersion
        targetCompatibility rootProject.targetCompatibilityVersion
    }
}

dependencies {
    compile dependency.retrofit
    compile dependency.retrofitGsonConverter
    compile dependency.gson
    compile dependency.okHttp
    compile dependency.okHttpInterceptor
    compile dependency.annotations

    androidTestCompile (dependency.junitAddons) {
        transitive = false
    }

    testCompile dependency.junit
    testCompile dependency.retrofitMock
    testCompile (dependency.junitAddons) {
        transitive = false
    }
    androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2', {
        exclude group: 'com.android.support', module: 'support-annotations'
    })
}
